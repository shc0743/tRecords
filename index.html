<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>总览 - 记录器</title>
    <link rel="shortcut icon" href="favicon.png" type="image/png">
    <link rel="apple-touch-icon" href="favicon-192x192.png">
    <meta name="theme-color" content="#ffffff">
    <link rel="stylesheet" href="style.css">
    <script src="./sw_content.js"></script>
    <script async src="webmanifest.js"></script>
</head>
<body>

    <div id="app" class="is-loading">

        <div class="app-fixed-first-page-placeholder"></div>
        <div class="app-fixed-first-page">
            <h1>总览</h1>

            <p class="loading-mask">正在加载中，请稍候...</p>

            <p>
                <span>数据库: </span>
                <span id="dbName"></span>
            </p>

            <div class="app-records-container app-data-entry" style="padding: 5px;"></div>
        </div>

        <div class="app-related-content">
            <details open>
                <summary>设置</summary>

                <div style="margin: 10px 0; overflow: auto;">
                    <fieldset>
                        <legend>数据</legend>

                        <details>
                            <summary>用量</summary>
                            <p style="margin-top: 0">
                                <span>当前用量:</span>
                                <span id="data_estimate_usage">N/A</span>
                                <br>
                                <span title="quota">配额:</span>
                                <span id="data_estimate_quota">N/A</span>
                            </p>
                            <dialog><button id="deleteDB">确定</button><button onclick="this.parentElement.close()">取消</button>
                            </dialog>
                            <div><a href="javascript:" onclick="this.parentElement.previousElementSibling.showModal()">删除数据库:
                                    <span id="deleteDB_databaseName"></span></a></div>
                        </details>

                        <details style="margin-top: 10px;">
                            <summary>persist</summary>
                            <div style="padding: 10px">
                                <table border="1" id="persistManager">
                                    <tr>
                                        <td><b>[[Status]]</b></td>
                                        <td><span class="content" id="persistStatus">Loading persist status</span> (click to recheck)</td>
                                    </tr>
                                    <tr>
                                        <td><b>[[Persist]]</b></td>
                                        <td class="content"><a href="javascript:" id="doPersist">navigator.storage.persist()</a></td>
                                    </tr>
                                </table>

                                <style>#persistManager td { padding: 5px; }</style>
                            </div>
                        </details>
                    </fieldset>
                </div>

                <div style="margin: 10px 0;">
                    <fieldset>
                        <legend>更新</legend>
                        <fieldset>
                            <legend>立即更新</legend>
                            <div>
                                <dialog>正在更新</dialog>
                                <a href="javascript:" id="updateAllResources" hidden>更新所有资源</a>
                                <script>
                                    if (!Reflect.has(globalThis, 'swAlive')) { document.currentScript.previousElementSibling.dataset.na = document.currentScript.previousElementSibling.innerHTML = '暂不可用' }
                                </script>
                            </div>
                            <div><a href="javascript:void location.reload()">重新加载页面</a></div>
                        </fieldset>
                        <div id="updateManagerContainer"></div>
                    </fieldset>
                </div>

                <div style="margin: 10px 0;">
                    <fieldset>
                        <legend>扩展程序</legend>

                        <div id="extManagerContainer"></div>
                    </fieldset>
                </div>
            </details>

            <div><br><b>Version:&nbsp;</b><span id="versionText"></span></div>
        </div>
    </div>

    <script type="module" src="index.js"></script>
    
</body>
</html>